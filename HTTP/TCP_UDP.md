 ## 页面加载
 1，URL 解析浏览器会首先判断你输入的是否为有效的 URL，还是属于需要传输给搜索引擎的默认搜索关键字。并且浏览器还会检查自带的 “ 预加载 HSTS（HTTP 严格传输安全）” 列表，这个列表里包含了那些请求浏览器只使用 HTTPS 进行连接的网站。如果网站在这个列表里，浏览器会使用 HTTPS 而不是 HTTP 协议，否则，最初的请求会使用 HTTP 协议发送。接下来，浏览器会检查你的输入字符是否含有特殊非 ASCII 关键字，如果含有特殊的字符会进行 UTF8 编码，部分特殊的网站会要求进行 GBK 编码。

  2，DNS 解析在 URL 解析完成之后，浏览器会根据本地的 hosts 文件或者向本机 / 网关设置的 DNS 服务器发起域名解析请求。DNS 的解析过程中，浏览器会首先检查本机是否有域名缓存，如果没有的话会向 DNS 服务器发起请求，如果子 DNS 服务器不存在该记录则会递归向父层级的 DNS 发起请求。我之前在进行 iOS 开发的时候还碰到 IPV6 的问题，即苹果要求 iOS 应用能够在 IPV6 环境下正常运行，那么这个时候 DNS 服务器发现如果你请求的是 IPV6 的地址，对于仅有 IPV4 地址的服务器其会提供一个 NAT64 的功能，即保证客户端虽然为 IPV6 地址，也能和 IPV4 的服务器正常通信。

  3，TCP/IP协议传输

  当浏览器得到了目标服务器的IP地址，以及URL中给出来端口号（http协议默认端口号是80，https默认端口号是443），它会调用系统函数socket，请求一个TCP流套接字，对应的参数是AF_INET/AF_INET6和SOCK_STREAM。TCP的建立连接与关闭连接分别是三次握手和四次握手，
   
   * 建立连接
   1，第一次握手：Client将标志位SYN置位1，随机产生一个值seq = J，并将数据包发送给Server，Client进入SYN_SENT的状态，等待Server确认。2，第二次握手：Server收到数据包后由标志位SYN = 1知道Client请求建立连接，Server将标志位SYN和ACK都置位1，ack = J + 1,随机产生一个值seq = K，并将该数据包发送给Client以确认连接请求，Server进入SYN_RCVD状态。 3. 第三次握手：Client 收到确认后，检查 ack 是否为 J+1，ACK 是否为 1，如果正确则将标志位 ACK 置为 1，ack=K+1 ，并将该数据包发 送给 Server，Server 检查 ack 是否为 K+1，ACK 是否为 1，如果正确则连接建立成功，Client 和 Server 进入 ESTABLISHED 状态，完成三次握手，随后 Client 与 Server 之间可以开始传输数据了。

* 关闭连接时 
 1， 第一次挥手：Client 发送一个 FIN，用来关闭 Client 到 Server 的数据传送，Client 进入 FIN_WAIT_1 状态。 2. 第二次挥手：Server 收到 FIN 后，发送一个 ACK 给 Client，确认序号为收到序号 +1（与 SYN 相同，一个 FIN 占用一个序号）， Server 进入 CLOSE_WAIT 状态。 3. 第三次挥手：Server 发送一个 FIN，用来关闭 Server 到 Client 的数据传送，Server 进入 LAST_ACK 状态。 4. 第四次挥手：Client 收到 FIN 后，Client 进入 TIME_WAIT 状态，接着发送一个 ACK 给 Server，确认序号为收到序号 +1，Server 进入 CLOSED 状态，完成四次挥手。

* HTTP请求封装

通常HTTP消息包括客户机向服务器的请求消息和服务器向客户机的响应消息。这两种类型的消息由一个起始行，一个或者多个头域，一个只是头域结束的空行和可选的消息体组成。HTTP的头域包括通用头，请求头，和实体头四个部分。每个头域由一个域名，冒号（: ）和域值三部分组成。域名是大小写无关的，域值前可以添加任何数量的空格符，头域可以被扩展为多行，在每行开始处，使用至少一个空格或制表符。

我们在正常的开发中主要会遵循 RESTful 风格，即主要以 GET、POST 、 PUT、DELETE 这四个动词进行请求，每个动词表征不同的含义，同时会将资源名与资源编号放在 URL 中增加可读性。


* HTTP状态码

100 
101

200
202

300
301
302
303
304

400
403
404